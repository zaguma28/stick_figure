# TASKS.md

# Antigravity 実装タスク（MVP完走用）

## 0) ガードレール（必須）

- 破壊的コマンド禁止（rm -rf / del / format / diskpart 等）
- 削除が必要なら「コマンド提示→承認待ち」
- git運用：マイルストーンごとにコミット
- 各マイルストーンでビルド/実行テスト→結果をログ化
- IMPLEMENTATION_LOG.md を更新

---

## Sprint 1：起動・操作（Done条件：触れる）

### 1.1 Godotプロジェクト作成

- 画面縦固定（モバイル想定）
- 空シーン起動

Done：

- PC上で実行し、UIが表示される

### 1.2 入力＆UI

- 左スティック、右ボタン群（攻撃/ロール/ガード/パリィ/スキル2/エスト）
- ボタン反応をログ表示

Done：

- すべての入力が反応し、デバッグ表示される

### 1.3 プレイヤー基礎（HP/スタミナ/硬直）

- SPEC.md の数値を実装
- スタミナ消費・回復ディレイが動く
- ロールの無敵/硬直が動く

Done：

- HP/スタミナがUIに表示され、行動で増減する

---

## Sprint 2：戦闘の核（Done条件：雑魚部屋が成立）

### 2.1 ヒット判定

- プレイヤー攻撃の当たり判定
- ヒットストップ（短）とノックバック（小）

Done：

- 当て感が出る（視覚/停止/SE）

### 2.2 敵AI 6種（簡易でOK）

- Charger / Shooter / Spreader / Shield / Bomber / Summoner
- それぞれの弾・突進・盾・爆発・召喚が視認できる

Done：

- 1部屋で戦って勝てる

### 2.3 体幹（Poise）とダウン

- 雑魚Poise 40、盾Poise70
- 体幹0でダウン（雑魚1.2秒）

Done：

- ダウンが明確に発生し、追撃できる

---

## Sprint 3：ローグ部分（Done条件：10Fが回せる）

### 3.1 フロア進行

- 10F固定
- 4F/9Fは事件
- 10Fはボス

Done：

- 1周回せる（仮UIでOK）

### 3.2 報酬3択＋タグ重み付け

- SPEC.md の重み付け（×1.8/×1.3）
- 3択のうち1枠は別系統

Done：

- 拾った方向に自然に伸びる

### 3.3 詰み防止（9F天井）

- 未所持なら救済ピースを候補へ混ぜる

Done：

- 9Fまでに救済が提示される

---

## Sprint 4：ボス（Done条件：攻略になる）

### 4.1 ボス実装（3フェーズ）

- BOSS_PATTERN.md の秒刻み行動を実装（優先）
- 予兆（エフェクト/SE）を付与

Done：

- P1→P2→P3に移行し、各技が再現される

### 4.2 バランス調整（KPI合わせ）

- フロア時間35〜60秒
- 到達率/撃破率が目標帯へ

Done：

- Acceptance Criteria を満たす（概ねでOK）

---

## 付録：エージェント向け実装方針

- まず「動く」→ 次に「数値固定」→ 最後に「演出/視認性」
- 予兆は難易度の本体：必ず見える・聞こえる・識別できる
